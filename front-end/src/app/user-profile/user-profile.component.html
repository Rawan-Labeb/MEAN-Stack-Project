
<div class="container rounded bg-white mt-5 mb-5">
  <div class="row">
    <div class="col-md-3 border-right">
      <div class="d-flex flex-column align-items-center text-center p-3 py-5">
        <img 
          class="rounded-circle mt-5" 
          width="150px" 
          [src]="userProfileForm.get('image')?.value ? userProfileForm.get('image')?.value : 'https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg'"
          alt="User Image"
        >
        <span class="font-weight-bold mt-3">{{userProfileForm.get('firstName')?.value}} {{userProfileForm.get('lastName')?.value}}</span>
        <span class="text-black-50">{{userProfileForm.get('email')?.value}}</span>
      </div>
    </div>
    <div class="col-md-5 border-right">
      <div class="p-3 py-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="text-right">Profile Settings</h4>
        </div>
        <form [formGroup]="userProfileForm" (ngSubmit)="onSubmit()">
          <div class="row mt-2">
            <div class="col-md-6">
              <label class="labels">First Name</label>
              <input type="text" class="form-control" placeholder="First name" formControlName="firstName">
              <div *ngIf="userProfileForm.get('firstName')?.invalid && userProfileForm.get('firstName')?.touched" class="text-danger">
                First Name is required.
              </div>
            </div>
            <div class="col-md-6">
              <label class="labels">Last Name</label>
              <input type="text" class="form-control" placeholder="Last name" formControlName="lastName">
              <div *ngIf="userProfileForm.get('lastName')?.invalid && userProfileForm.get('lastName')?.touched" class="text-danger">
                Last Name is required.
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              <label class="labels">Email</label>
              <input type="text" class="form-control" formControlName="email">
              <div *ngIf="userProfileForm.get('email')?.invalid && userProfileForm.get('email')?.touched" class="text-danger">
                <div *ngIf="userProfileForm.get('email')?.errors?.['required']">Email is required.</div>
                <div *ngIf="userProfileForm.get('email')?.errors?.['email']">Invalid email format.</div>
              </div>
            </div>
            <div class="col-md-12 mt-3">
              <label for="governorate">Governorate:</label>
              <select id="governorate" class="form-control" formControlName="state">
                <option value="">-- Select Governorate --</option>
                <option *ngFor="let gov of governorates" [value]="gov.id">{{ gov.governorate_name_en }}</option>
              </select>
              <input type="hidden" formControlName="stateName">
            </div>
            <div class="col-md-12 mt-3">
              <label for="city">City:</label>
              <select id="city" class="form-control" formControlName="city">
                <option value="">-- Select City --</option>
                <option *ngFor="let city of cities" [value]="city.id">{{ city.city_name_en }}</option>
              </select>
              <input type="hidden" formControlName="cityName">
            </div>
            <div class="col-md-12 mt-3">
              <label for="street">Street:</label>
              <input id="street" class="form-control" formControlName="street">
            </div>
            <div class="col-md-12 mt-3">
              <label for="zipCode">Zip Code:</label>
              <input id="zipCode" class="form-control" formControlName="zipCode">
              <div *ngIf="userProfileForm.get('zipCode')?.invalid && userProfileForm.get('zipCode')?.touched" class="text-danger">
                <div *ngIf="userProfileForm.get('zipCode')?.errors?.['pattern']">Invalid zip code format.</div>
              </div>
            </div>
            <div class="col-md-12 mt-3">
              <label for="contactNo">Contact Number:</label>
              <input id="contactNo" class="form-control" formControlName="contactNo">
              <div *ngIf="userProfileForm.get('contactNo')?.invalid && userProfileForm.get('contactNo')?.touched" class="text-danger">
                <div *ngIf="userProfileForm.get('contactNo')?.errors?.['pattern']">Invalid contact number format.</div>
              </div>
            </div>
            <!-- <div class="col-md-12 mt-3">
              <label for="image">Profile Image URL:</label>
              <input id="image" type="text" class="form-control" formControlName="image">
            </div> -->


            <div class="col-md-12 mt-3">
              <label for="image">Profile Image Upload:</label>
              <input id="image" type="file" class="form-control" (change)="onFileChange($event)">
              <div *ngIf="userProfileForm.get('image')?.invalid && userProfileForm.get('image')?.touched" class="text-danger">
                Image file is required.
              </div>
            </div>

          </div>
          <div class="mt-5 text-center">
            <button type="submit" class="btn btn-primary profile-button">Save Profile</button>
          </div>
        </form>
      </div>
    </div>

    <div class="container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-bold">User Orders</h4>
        <button class="btn btn-primary">
          <i class="fa fa-plus"></i> Add Order
        </button>
      </div>
    
      <!-- Order Summary Section -->
      <div class="mb-3 p-3 bg-light rounded shadow-sm">
        <h5 class="fw-bold">Order Summary</h5>
        <p><strong>Total Orders:</strong> 3</p>
        <p><strong>Total Spent:</strong> <span class="text-primary fw-bold">$225.00</span></p>
      </div>
    
      <div class="row justify-content-center">
        <!-- Order 1 -->


        

        <!-- <div class="col-md-6 col-lg-4 mb-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title fw-bold">Order #1</h5>
              <p class="text-muted"><i class="fa fa-calendar"></i> Order Date: 01/01/2025</p>
              <p><strong>Items:</strong> Item A, Item B, Item C</p>
              <p><strong>Status:</strong> <span class="badge bg-success">Shipped</span></p>
              <p><strong>Total:</strong> <span class="text-primary fw-bold">$100.00</span></p>
            </div>
          </div>
        </div> -->
    


        <div class="col-md-6 col-lg-4 mb-3" *ngFor="let order of userOrder">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title fw-bold">Order #{{order._id}}</h5>
              <p class="text-muted"><i class="fa fa-calendar"></i> Order Date: {{order.date | date}}</p>
              <p><strong>Items:</strong>
                <ul>
                  <li *ngFor="let item of order.items">{{item.productId}} (x {{item.quantity}}) - ${{item.price}}</li>
                </ul>
              <!-- </p> -->
              <p><strong>Status: </strong> 
                <span [ngClass]="{
                  'badge bg-success': order.status === 'shipped',
                  'badge bg-warning': order.status === 'pending',
                  'badge bg-primary': order.status === 'completed',
                  'badge bg-danger': order.status === 'cancelled',
                  'badge bg-secondary': order.status === 'returned',
                  'badge bg-info': order.status === 'refunded'
                }">{{order.status}}</span>
              </p>
              <p><strong>Total:</strong> <span class="text-primary fw-bold">${{order.totalPrice}}</span></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    





  </div>
</div>
