<!-- Product Top Bar -->
<div class="container mb-4" style="margin-top: 20px;">
  <div class="row align-items-center">
    <!-- Filters -->
    <div class="col-md-4">
      <select 
        class="form-select" 
        [(ngModel)]="selectedCategory" 
        (change)="updateCategory(selectedCategory)"
      >
        <option value="">All Categories</option>
        <option value="men">Men</option>
        <option value="woman">Woman</option>
        <option value="unisex">Unisex</option>
      </select>
    </div>

    <!-- Sorting -->
    <div class="col-md-4 text-md-center">
      <div class="btn-group" role="group">
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          [class.active]="sortBy === 'price-asc'" 
          (click)="updateSort('price-asc')"
        >
          Price: Low to High
        </button>
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          [class.active]="sortBy === 'price-desc'" 
          (click)="updateSort('price-desc')"
        >
          Price: High to Low
        </button>
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          [class.active]="sortBy === 'name-asc'" 
          (click)="updateSort('name-asc')"
        >
          Name: A-Z
        </button>
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          [class.active]="sortBy === 'name-desc'" 
          (click)="updateSort('name-desc')"
        >
          Name: Z-A
        </button>
      </div>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation" class="mt-4 col-md-4 d-flex justify-content-end">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button 
            class="page-link" 
            (click)="goToPage(currentPage - 1)" 
            [disabled]="currentPage === 1"
          >
            Previous
          </button>
        </li>
        <li 
          class="page-item" 
          *ngFor="let page of paginationArray" 
          [class.active]="page === currentPage"
        >
          <button class="page-link" (click)="goToPage(page)">
            {{ page }}
          </button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button 
            class="page-link" 
            (click)="goToPage(currentPage + 1)" 
            [disabled]="currentPage === totalPages"
          >
            Next
          </button>
        </li>
      </ul>
    </nav>
  </div>
</div>

<!-- Product Grid -->
<section class="py-5">
  <div class="container">
    <h2 class="text-center mb-4">Perfume Collection</h2>
    <div class="row g-4">
      <div class="col-md-3" *ngFor="let perfume of products">
        <div class="card shadow-sm h-100">
          <img 
            [src]="perfume?.productImage[0] || 'path/to/default-image.jpg'" 
            class="card-img-top product-grid-img" 
            alt="{{ perfume?.productName }}" 
          />
          <div class="card-body d-flex flex-column justify-content-between">
            <div>
              <h5 class="card-title">{{ perfume?.productName }}</h5>
              <p class="fw-bold">${{ perfume?.productPrice.toFixed(2) }}</p>
              <p class="text-muted">{{ perfume?.productCategory | titlecase }}</p>
            </div>
            <a routerLink="details/{{perfume._id}}" class="btn btn-primary w-100 mt-auto">See Details</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation" class="mt-4">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button 
            class="page-link" 
            (click)="goToPage(currentPage - 1)" 
            [disabled]="currentPage === 1"
          >
            Previous
          </button>
        </li>
        <li 
          class="page-item" 
          *ngFor="let page of paginationArray" 
          [class.active]="page === currentPage"
        >
          <button class="page-link" (click)="goToPage(page)">
            {{ page }}
          </button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button 
            class="page-link" 
            (click)="goToPage(currentPage + 1)" 
            [disabled]="currentPage === totalPages"
          >
            Next
          </button>
        </li>
      </ul>
    </nav>
  </div>
</section>